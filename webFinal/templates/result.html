<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Room&Hi</title>
    <link rel="icon" href="../static/img/popicon5.png"  sizes="256x256"  type="image/png">
    <link href="../static/css/styles.css" rel="stylesheet" />
    <script src="../static/js/panelcontent.js" type="text/javascript"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.7.0/chart.min.js"></script>
    <style>
        .map_wrap, .map_wrap * {margin:0;padding:0;font-family:'Malgun Gothic',dotum,'ë‹ì›€',sans-serif;font-size:13px;}
        .map_wrap a, .map_wrap a:hover, .map_wrap a:active{color:#000;text-decoration: none;}
        .map_wrap {position:relative;width:100%;height:500px;}
        #menu_wrap {position:absolute;top:0;left:0;bottom:0;width:250px;margin:10px 0 30px 10px;padding:5px;overflow-y:auto;background:rgba(255, 255, 255, 0.7);z-index: 1;font-size:12px;border-radius: 10px;}
        .bg_white {background:#fff;}
        #menu_wrap hr {display: block; height: 1px;border: 0; border-top: 2px solid #5F5F5F;margin:3px 0;}
        #menu_wrap .option{text-align: center;}
        #menu_wrap .option p {margin:10px 0;}  
        #menu_wrap .option button {margin-left:10px;}
        #placesList {padding-left:1px;}
        #placesList li {list-style: none;}
        #placesList .item {position:relative;border-bottom:1px solid #888;overflow: hidden;cursor: pointer;min-height: 65px;}
        #placesList .item span {display: block;margin-top:4px;}
        #placesList .item h5, #placesList .item .info {text-overflow: ellipsis;overflow: hidden;white-space: nowrap;}
        #placesList .item h5{font-size:1em; margin:1px 0px;}
        #placesList .item .info{padding:10px 0 10px 55px;}
        #placesList .info .gray {color:#8a8a8a;}
        #placesList .info .jibun {padding-left:26px;background:url(https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/places_jibun.png) no-repeat;}
        #placesList .info .tel {color:#009900;}
        #placesList .item .markerbg {float:left;position:absolute;width:36px; height:37px;margin:10px 0 0 10px;background:url(https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_number_blue.png) no-repeat;}
        #placesList .item .marker_1 {background-position: 0 -10px;}
        #placesList .item .marker_2 {background-position: 0 -56px;}
        #placesList .item .marker_3 {background-position: 0 -102px}
        #placesList .item .marker_4 {background-position: 0 -148px;}
        #placesList .item .marker_5 {background-position: 0 -194px;}
        #pagination {margin:10px auto;text-align: center;}
        #pagination a {display:inline-block;margin-right:10px;}
        #pagination .on {font-weight: bold; cursor: default;color:#777;}

        
        .my-button[type="submit"]{
            background-color:#655DBB;
            border: none;
            border-radius: 10px;
            color: #fff;
            cursor: pointer;
            padding: 4px 10px;
            font-size: 15px;
            height: 38px;
            margin-left: 15px;
            margin-right: -5px;
            margin-left: 39px;
            margin: -5px;
            margin-top: 4px;
            margin-bottom: 4px;
            margin-left: -7px;
            transition: background-color 0.3s ease; 
          }
   .my-button[type="submit"]:hover {
          background-color: #BFACE2;
      }

      .search-container2 {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
    }


          .info_body{
            background-color:pink;
            width: 390px;
            height: 679px;
          }

          .close-btn[type="submit"]{
            background-color:#EBC7E6;
            border: none;
            border-radius: 10px;
            color: #fff;
            cursor: pointer;
            padding: 4px 10px;
            font-size: 15px;
            height: 38px;
            margin-left: 15px;
            margin-right: -5px;
            margin-left: 39px;
            margin: -5px;
            top:10px
         
          }
        .close-btn[type="submit"]:hover {
          background-color: #BFACE2;
        }
          
      
    </style>
    
        
</head>
<body>
    <div class="overlay" id="overlay">
        <div class="text-container">
            <p class="microphone-in-use">ë§ˆì´í¬ ì‚¬ìš©ì¤‘...</p>
            <button type="button" id="cancelButton">ì·¨ì†Œ</button>
        </div>
    </div>
    <div class="search-container">
        <div class="search-wrapper3">
            <div class="search-image3">
                <a href="/"><img src="../static/img/ë£¸ì•¤í•˜ì´_ê°€ë¡œ.png" style="width=50px; height=50px;     margin-left: -57px; margin-top: 19px;
                    height: 108px;"></a>
            </div>
    
            <form class="search-box3" action="/result">
                <input type="text" id="search" autocomplete="off" name="search" required value = "{{"".join(gu_send)}}" required placeholder="ì˜ˆ) ì €ë ´í•˜ê²Œ í˜¸ìº‰ìŠ¤í•˜ê¸° ì¢‹ì€ ê¹”ë”í•œ í˜¸í…” ì•Œë ¤ì¤˜">
                <!-- <button type="submit">ê²€ìƒ‰</button> -->
                <button type="button" id="micButton" style="background: none; border: none; padding: 0;">
                    <img src="../static/img/mic2.png" alt="ë§ˆì´í¬" style="width: 25px; height: 25px;">
                </button> 
            </form> 
            {% if res.shape[0]!=0 %}
            <div class="map"style="width:121%; height:90%" >
                <div id="map"  style="width:65%; height:91%;"></div>

                <div id="menu_wrap" class="bg_white" >
                   
                    <hr>
                    <ul id="placesList"></ul>
                    <div id="pagination"></div>
                </div>


                <script type="text/javascript" src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=c1a48e23f012e31e332fab7ac2806802&libraries=services,clusterer,drawing"></script>
                <script>
                    // ë§ˆì»¤ë¥¼ ë‹´ì„ ë°°ì—´ì…ë‹ˆë‹¤
                    var markers = [];
                    
                    var mapContainer = document.getElementById('map'), // ì§€ë„ë¥¼ í‘œì‹œí•  div 
                        mapOption = {
                            center: new kakao.maps.LatLng({{gu_lat}}, {{gu_long}}), // ì§€ë„ì˜ ì¤‘ì‹¬ì¢Œí‘œ
                            level: 3 // ì§€ë„ì˜ í™•ëŒ€ ë ˆë²¨
                        };  

                    function divide_data_into_pages(data, itemsPerPage) {
                        var pages = [];
                        for (var i = 0; i < data.length; i += itemsPerPage) {
                            pages.push(data.slice(i, i + itemsPerPage));
                        }
                        return pages;
                    }
    
                    // í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ì €ì¥í•  ë³€ìˆ˜ì…ë‹ˆë‹¤
                    var currentPage = 1;   
                    
                    // í˜ì´ì§€ë³„ ë°ì´í„°ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
                    function displayPageData() {
                        var hotels = dividedData[currentPage - 1]; // í˜ì´ì§€ ë²ˆí˜¸ì— í•´ë‹¹í•˜ëŠ” ë°ì´í„°ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤
                        displayPlaces(hotels); // í•´ë‹¹ ë°ì´í„°ë¥¼ ì‚¬ìš©í•˜ì—¬ í˜ì´ì§€ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤
                    }
                    // ì§€ë„ë¥¼ ìƒì„±í•©ë‹ˆë‹¤    
                    var map = new kakao.maps.Map(mapContainer, mapOption);

                    // ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê°€ì ¸ì˜¨ ê°’ì„ ì‚¬ìš©í•˜ì—¬ ì§€ë„ì— ë§ˆì»¤ë¥¼ ì¶”ê°€í•˜ëŠ” ì½”ë“œ
                    {% for hotel in map_db %}
                        var marker = new kakao.maps.Marker({
                            position: new kakao.maps.LatLng({{ hotel.latitude }}, {{ hotel.longitude }}),
                            title: '{{ hotel.ht_name }}'
                        });
                        var infowindow = new kakao.maps.InfoWindow({
                            content: '<div style="padding:5px;">' + '{{ hotel.ht_name }}' + '</div>',
                            // removable: false  // true ë¡œí•˜ë©´ x í‘œì‹œ ìƒê¹€
                        });
                        kakao.maps.event.addListener(marker, 'click', function() {
                            if (infowindow.getMap()) {
                                infowindow.close();
                            } else {
                                infowindow.open(map, marker);
                            }
                        });
                        markers.push(marker);
                        marker.setMap(map);  // ì´ ë¶€ë¶„ì„ ì¶”ê°€í•˜ì—¬ ì§€ë„ì— ë§ˆì»¤ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤.
                    {% endfor %}
                    
                    // ì¥ì†Œê²€ìƒ‰ì´ ì™„ë£Œëì„ ë•Œ í˜¸ì¶œë˜ëŠ” ì½œë°±í•¨ìˆ˜ ì…ë‹ˆë‹¤
                    function placesSearchCB(data, status, pagination) {
                        if (status === kakao.maps.services.Status.OK) {
                    
                            // ì •ìƒì ìœ¼ë¡œ ê²€ìƒ‰ì´ ì™„ë£Œëìœ¼ë©´
                            // ê²€ìƒ‰ ëª©ë¡ê³¼ ë§ˆì»¤ë¥¼ í‘œì¶œí•©ë‹ˆë‹¤
                            displayPlaces(data);
                    
                            // í˜ì´ì§€ ë²ˆí˜¸ë¥¼ í‘œì¶œí•©ë‹ˆë‹¤
                            displayPagination(pagination);
                    
                        } else if (status === kakao.maps.services.Status.ZERO_RESULT) {
                    
                            alert('ê²€ìƒ‰ ê²°ê³¼ê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.');
                            return;
                    
                        } else if (status === kakao.maps.services.Status.ERROR) {
                    
                            alert('ê²€ìƒ‰ ê²°ê³¼ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                            return;
                    
                        }
                    }


                    // ê²€ìƒ‰ ê²°ê³¼ ëª©ë¡ê³¼ ë§ˆì»¤ë¥¼ í‘œì¶œí•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
                    function displayPlaces(hotels) {
                        var listEl = document.getElementById('placesList'),
                            fragment = document.createDocumentFragment(),
                            bounds = new kakao.maps.LatLngBounds();

                        // ê²€ìƒ‰ ê²°ê³¼ ëª©ë¡ì— ì¶”ê°€ëœ í•­ëª©ë“¤ì„ ì œê±°í•©ë‹ˆë‹¤
                        removeAllChildNods(listEl);

                        // ì§€ë„ì— í‘œì‹œë˜ê³  ìˆëŠ” ë§ˆì»¤ë¥¼ ì œê±°í•©ë‹ˆë‹¤
                        removeMarker();

                        for (var i = 0; i < hotels.length; i++) {
                            var hotelPosition = new kakao.maps.LatLng(hotels[i].latitude, hotels[i].longitude),
                                marker = addMarker(hotelPosition, i),
                                itemEl = getListItem(i, hotels[i]);

                            bounds.extend(hotelPosition);

                            (function (marker, title, address) {
                                kakao.maps.event.addListener(marker, 'mouseover', function () {
                                    displayInfowindow(marker, title);
                                });

                                kakao.maps.event.addListener(marker, 'mouseout', function () {
                                    infowindow.close();
                                });

                                itemEl.onmouseover = function () {
                                    displayInfowindow(marker, title);
                                };

                                itemEl.onmouseout = function () {
                                    infowindow.close();
                                };
                            })(marker, hotels[i].ht_name, hotels[i].address);

                            fragment.appendChild(itemEl);
                        }

                        listEl.appendChild(fragment);
                        map.setBounds(bounds);
                    }

                    // ê²€ìƒ‰ê²°ê³¼ í•­ëª©ì„ Elementë¡œ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
                    function getListItem(index, hotel) {
                        var el = document.createElement('li'),
                            itemStr = '<span class="markerbg marker_' + (index + 1) + '"></span>' +
                            '<div class="info">' +
                            '   <h5>' + hotel.ht_name + '</h5>';

                        if (hotel.address) {
                            itemStr += '   <span>' + hotel.address + '</span>';
                        } else {
                            itemStr += '   <span>ì£¼ì†Œ ì •ë³´ ì—†ìŒ</span>';
                        }

                        itemStr += '</div>';

                        el.innerHTML = itemStr;
                        el.className = 'item';

                        return el;
                    }

                    // displayPlaces í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©´ì„œ ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ë°›ì•„ì˜¨ í˜¸í…” ë¦¬ìŠ¤íŠ¸ë¥¼ ì „ë‹¬í•©ë‹ˆë‹¤.
                    {% with hotels = map_db|tojson %}
                        displayPlaces({{ hotels }});
                    {% endwith %}
                    
                    // ë§ˆì»¤ë¥¼ ìƒì„±í•˜ê³  ì§€ë„ ìœ„ì— ë§ˆì»¤ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
                    function addMarker(position, idx, title) {
                        var imageSrc = 'https://t1.daumcdn.net/localimg/localimages/07/mapapidoc/marker_number_blue.png', // ë§ˆì»¤ ì´ë¯¸ì§€ url, ìŠ¤í”„ë¼ì´íŠ¸ ì´ë¯¸ì§€ë¥¼ ì”ë‹ˆë‹¤
                            imageSize = new kakao.maps.Size(36, 37),  // ë§ˆì»¤ ì´ë¯¸ì§€ì˜ í¬ê¸°
                            imgOptions =  {
                                spriteSize : new kakao.maps.Size(36, 691), // ìŠ¤í”„ë¼ì´íŠ¸ ì´ë¯¸ì§€ì˜ í¬ê¸°
                                spriteOrigin : new kakao.maps.Point(0, (idx*46)+10), // ìŠ¤í”„ë¼ì´íŠ¸ ì´ë¯¸ì§€ ì¤‘ ì‚¬ìš©í•  ì˜ì—­ì˜ ì¢Œìƒë‹¨ ì¢Œí‘œ
                                offset: new kakao.maps.Point(13, 37) // ë§ˆì»¤ ì¢Œí‘œì— ì¼ì¹˜ì‹œí‚¬ ì´ë¯¸ì§€ ë‚´ì—ì„œì˜ ì¢Œí‘œ
                            },
                            markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize, imgOptions),
                                marker = new kakao.maps.Marker({
                                position: position, // ë§ˆì»¤ì˜ ìœ„ì¹˜
                                image: markerImage 
                            });
                    
                        marker.setMap(map); // ì§€ë„ ìœ„ì— ë§ˆì»¤ë¥¼ í‘œì¶œí•©ë‹ˆë‹¤
                        markers.push(marker);  // ë°°ì—´ì— ìƒì„±ëœ ë§ˆì»¤ë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤
                    
                        return marker;
                    }
                    
                    // ì§€ë„ ìœ„ì— í‘œì‹œë˜ê³  ìˆëŠ” ë§ˆì»¤ë¥¼ ëª¨ë‘ ì œê±°í•©ë‹ˆë‹¤
                    function removeMarker() {
                        for ( var i = 0; i < markers.length; i++ ) {
                            markers[i].setMap(null);
                        }   
                        markers = [];
                    }
                    
                    function syncPagination(page) {
                        currentPage = page; // í˜„ì¬ í˜ì´ì§€ ë²ˆí˜¸ ì—…ë°ì´íŠ¸
                        displayPageData(); // í˜ì´ì§€ ë²ˆí˜¸ì— ë”°ë¼ í˜ì´ì§€ì˜ ë°ì´í„°ë¥¼ í‘œì‹œ
                        // í…Œì´ë¸” í˜ì´ì§€ë„¤ì´ì…˜ì—ì„œ ì„ íƒëœ ë§í¬ ì—…ë°ì´íŠ¸
                        const activeLink = document.querySelector('.res .pagination .active');
                        if (activeLink) {
                            activeLink.classList.remove('active');
                        }
                        document.querySelector('.res .pagination li:nth-child(' + page + ')').classList.add('active');
                    }
                    
                    // í˜ì´ì§€ ë²ˆí˜¸ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜ ìˆ˜ì •
                    function displayPagination(pagination) {
                        var paginationEl = document.getElementById('pagination'),
                            fragment = document.createDocumentFragment(),
                            i;
                    
                        // ê¸°ì¡´ì— ì¶”ê°€ëœ í˜ì´ì§€ë²ˆí˜¸ë¥¼ ì‚­ì œí•©ë‹ˆë‹¤
                        while (paginationEl.hasChildNodes()) {
                            paginationEl.removeChild(paginationEl.lastChild);
                        }
                    
                        for (i = 1; i <= pagination.last; i++) {
                            var el = document.createElement('a');
                            el.href = "#";
                            el.innerHTML = i;
                    
                            if (i === pagination.current) {
                                el.className = 'on';
                            } else {
                                el.onclick = (function (i) {
                                    return function () {
                                        syncPagination(i);
                                        return false;
                                    }
                                })(i);
                            }
                    
                            fragment.appendChild(el);
                        }
                        paginationEl.appendChild(fragment);
                    }
                    {% with hotels = map_db|tojson %}
                        var hotelData = {{ hotels }};
                    {% endwith %}

                    // í˜ì´ì§€ë³„ë¡œ ë°ì´í„°ë¥¼ ë‚˜ëˆ•ë‹ˆë‹¤ (í˜ì´ì§€ë‹¹ 15ê°œì˜ í˜¸í…”)
                    var dividedData = divide_data_into_pages(hotelData, 5);

                    // ì²« ë²ˆì§¸ í˜ì´ì§€ì˜ ë°ì´í„°ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤
                    displayPageData();

                    // í˜ì´ì§€ë„¤ì´ì…˜ì„ ì„¤ì •í•©ë‹ˆë‹¤
                    var pagination = {
                        current: 1,
                        last: dividedData.length,
                        gotoPage: function (page) {
                            this.current = page;
                            displayPagination(this);
                        }
                    };

                    // í˜ì´ì§€ ë²ˆí˜¸ë¥¼ í‘œì‹œí•©ë‹ˆë‹¤
                    //displayPagination(pagination); 
                    
                    // ê²€ìƒ‰ê²°ê³¼ ëª©ë¡ ë˜ëŠ” ë§ˆì»¤ë¥¼ í´ë¦­í–ˆì„ ë•Œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
                    // ì¸í¬ìœˆë„ìš°ì— ì¥ì†Œëª…ì„ í‘œì‹œí•©ë‹ˆë‹¤
                    function displayInfowindow(marker, title) {
                        var content = '<div style="padding:5px;z-index:1;">' + title + '</div>';
                    
                        infowindow.setContent(content);
                        infowindow.open(map, marker);
                    }
                    
                     // ê²€ìƒ‰ê²°ê³¼ ëª©ë¡ì˜ ìì‹ Elementë¥¼ ì œê±°í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤
                    function removeAllChildNods(el) {   
                        while (el.hasChildNodes()) {
                            el.removeChild (el.lastChild);
                        }
                    }
                    </script>
           
            </div>
            {% endif %}

            <div class="res">
                <div class='res-content'>
                    <p style="text-align: center;">ğŸ” {{search}}</p>
                    <table class="table"> 
                        <colgroup>
                            <col style="width: 10%">
                            <col style="width: 35%">
                            <col style="width: 10%">
                            <col style="width: 25%">
                            <col style="width: 20%">
                          </colgroup>
                        <thead>
                            <tr>
                                <th scope="col">No.</th>
                                <th scope="col">í˜¸í…”</th>
                                <th scope="col">ë“±ê¸‰</th>
                                <th scope="col">ë³´ëŸ¬ê°€ê¸°</th>
                                <th scope="col">ë”ë³´ê¸°</th>
                                <!-- add more columns as needed -->
                            </tr>
                        </thead>
                        <tbody>
                            {% if res.shape[0]!=0 %}
                                {% for idx,i in zip(idx_,res.index.tolist()) %}
                                <tr>  
                                    <td>{{idx}}</td>                              
                                    <td >
                                        <a id ="test" href="#" onclick="openPanelver2(
                                            '{{res.loc[i,'ht_name']}}',
                                            eval('{{ score_df.loc[i][cat_lst].values.tolist()|tojson|safe}}'),
                                            eval('{{pick_avg|tojson|safe}}'),
                                            eval('{{seoul_avg|tojson|safe}}'));" tooltip="í´ë¦­í•´ì„œ ì ìˆ˜ë¥¼ í™•ì¸í•˜ì„¸ìš”!" flow="down">
                                            {{res.loc[i,'ht_name']}}
                                          
                                        </a>    
                                        <span tooltip="Get Down." flow="down"></span>                                
                                    </td>
                                    
                                    <td>{{res.loc[i,'ë“±ê¸‰']}}</td>
                                    {% set booking_url = '<a href="'~ res['bk_url'][i] ~ '"></a>' %}
                                    {% set yanolja_url = '<a href="' ~ res['ya_url'][i] ~ '"></a>' %}
                                    {% set goodchoice_url = '<a href="' ~ res['good_url'][i] ~ '"></a>' %}
                                    <td>
                                        {% if booking_url != '<a href="-"></a>' %}<a href="{{res['bk_url'][i]}}" target="_blank"><img src="../static/img/ë¶€í‚¹.png" width="20" height="20"></a>
                                        {% else %} <a></a> {% endif %}
                                        {% if yanolja_url != '<a href="-"></a>' %}<a href="{{res['ya_url'][i]}}" target="_blank"><img src="../static/img/ì•¼ë†€.png" width="20" height="20"></a>
                                        {% else %} <a></a> {% endif %}
                                        {% if goodchoice_url != '<a href="-"></a>' %}<a href="{{res['good_url'][i]}}" target="_blank"><img src="../static/img/ì—¬ê¸°.png" width="20" height="20"></a>
                                        {% else %} <a></a> {% endif %}
                                    </td>
                                    <td>
                                        <form action='/hotel' method='get' target="_blank">
                                            <input type="hidden" name="ht_id" value="{{i}}">
                                            <input type="hidden" name="ht_name" value="{{res['ht_name'][i]}}">
                                            <input type="hidden" name="ht_address" value="{{res['address'][i]}}">
                                            <input type="hidden" name="search_key" value="{{search}}">
                                            <input type="hidden" name="score" value="{{next_df.loc[i,'score']}}">
                                            <input type="hidden" name="cat_id" value="{{next_df.loc[i,'cat_id']}}">
                                            <input type="hidden" name="df_date" value="{{next_df.loc[i,'date']}}">
                                            <input type="hidden" name="df_review" value="{{next_df.loc[i,'review']}}">
                                            <button type="submit" class="my-button" >ë” ë³´ê¸°</button>
                                        </form>
                                    </td>
                                </tr>
                                {% endfor %}
                            {% else %}
                            <tr>
                                <td colspan="5"style="text-align: center;">ê²€ìƒ‰ ê²°ê³¼ê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ê²€ìƒ‰í•´ë³´ì‹œê² ì–´ìš”?</td>
                            </tr>
                            {% endif %}
                        </tbody>
                    </table>

                    <div class="pagination">
                        <ul>
                        </ul>
                    </div>      
                </div>
          
      
            <script>
                window.onload = function() {
                    const table = document.querySelector('.res table');
                    const pagination = document.querySelector('.res .pagination');
                    const rowsPerPage = 5; // í˜ì´ì§€ë‹¹ ë³´ì—¬ì¤„ í–‰ ìˆ˜
                    let currentPage = 1;
            
                    function showRows() {        
                        // tbody ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
                        const tbody = table.querySelector('tbody');
            
                        // í…Œì´ë¸”ì˜ ëª¨ë“  í–‰ë“¤ì„ ê°€ì ¸ì™€ì„œ currentPageì— í•´ë‹¹í•˜ëŠ” í–‰ë“¤ë§Œ ë³´ì—¬ì¤ë‹ˆë‹¤.
                        const rows = tbody.querySelectorAll('tr');
                        const start = (currentPage - 1) * rowsPerPage;
                        const end = start + rowsPerPage;
            
                        rows.forEach((row, index) => {
                            if (index < start || index >= end) {
                                row.style.display = 'none';
                            } else {
                                row.style.display = '';
                            }
                        });
                    }
            
                    function createPagination() {
                        // ê¸°ì¡´ í˜ì´ì§€ ë§í¬ë“¤ì„ ì‚­ì œí•©ë‹ˆë‹¤.
                        pagination.querySelector('ul').innerHTML = '';
                        // í…Œì´ë¸”ì˜ ì´ í–‰ ìˆ˜ë¥¼ ê³„ì‚°í•˜ì—¬ í˜ì´ì§€ë„¤ì´ì…˜ì„ ìƒì„±í•©ë‹ˆë‹¤.
                        const tbody = table.querySelector('tbody');
                        const rows = tbody.querySelectorAll('tr');
                        const totalPages = Math.ceil(rows.length / rowsPerPage);
            
                        for (let i = 1; i <= totalPages; i++) {
                            const li = document.createElement('li');
                            const a = document.createElement('a');
                            a.href = '#';
                            a.textContent = i;
                            li.appendChild(a);
                            pagination.querySelector('ul').appendChild(li);
            
                            a.addEventListener('click', (event) => {
                            event.preventDefault();
                            currentPage = i; // í˜„ì¬ í˜ì´ì§€ë¥¼ ië¡œ ì„¤ì •í•©ë‹ˆë‹¤.
                            showRows(); // í˜ì´ì§€ ë²ˆí˜¸ê°€ ë°”ë€” ë•Œë§ˆë‹¤ showRows í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ì—¬ ë°ì´í„°ë¥¼ ì—…ë°ì´íŠ¸í•©ë‹ˆë‹¤.
                            syncPagination(i);

                            const activeLink = pagination.querySelector('.active');
                            if (activeLink) {
                                activeLink.classList.remove('active');
                            }
                            li.classList.add('active');
                        });

                        }
                    }
            
                    showRows();
                    createPagination();
                };
            </script>
        </div>   
            <form  class="search-button3" action="/pick"  style="position:fixed; bottom:20px;">
                <button>ë‹¤ì‹œí•˜ê¸°</button>
            </form>   
            
            
            <div id="test" class="panel">
                <div class="panel-header">
                    <button class="close-btn" type="submit" onclick="closePanel()" style="margin-left: 340px; margin-top: -14px; background-color: #EBC7E6; color: black;" >Close</button>
                </div>
                
                <div class="panel-content" style="margin-top:-48px     background-color: #EADFFF; "></div>
        
            </div>
        </div>
    </div>
    <script src="/static/js/stt.js"></script>
</body>
</html>